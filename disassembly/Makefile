IMAGE_DEPS = gfx/image_007_57dc.2bpp gfx/image_007_585c.2bpp gfx/image_007_595c.2bpp gfx/image_007_636e.2bpp gfx/image_009_4000.2bpp gfx/image_009_4400.2bpp gfx/image_009_5160.2bpp gfx/image_009_7860.2bpp gfx/image_00b_68b1.2bpp gfx/image_00b_68ec.2bpp gfx/image_00b_6931.2bpp gfx/image_00b_6955.2bpp gfx/image_00b_6daa.2bpp gfx/image_00b_6e39.2bpp gfx/image_00b_6e65.2bpp gfx/image_00b_6e8b.2bpp gfx/image_00b_6ef2.2bpp gfx/image_00b_7160.2bpp gfx/image_00b_7212.2bpp gfx/image_00c_4013.2bpp gfx/image_00c_4086.2bpp gfx/image_00c_40c1.2bpp gfx/image_00c_40ec.2bpp gfx/image_00c_4267.2bpp gfx/image_00c_42a8.2bpp gfx/image_00c_42fe.2bpp gfx/image_00c_4319.2bpp gfx/image_00c_43c2.2bpp gfx/image_00c_43e3.2bpp gfx/image_00c_4401.2bpp gfx/image_00c_441a.2bpp gfx/image_00c_44f4.2bpp gfx/image_00c_452a.2bpp gfx/image_00c_4663.2bpp gfx/image_00c_467b.2bpp gfx/image_00c_46a2.2bpp gfx/image_00c_46bd.2bpp gfx/image_00c_46e7.2bpp gfx/image_00c_47b6.2bpp gfx/image_00c_47fe.2bpp gfx/image_00c_4813.2bpp gfx/image_00c_4883.2bpp gfx/image_00c_493d.2bpp gfx/image_00c_49d8.2bpp gfx/image_00c_4ac9.2bpp gfx/image_00c_4af1.2bpp gfx/image_00c_4b25.2bpp gfx/image_00c_4b6b.2bpp gfx/image_00c_4b85.2bpp gfx/image_00c_4ba7.2bpp gfx/image_00c_4c82.2bpp gfx/image_00c_4c9a.2bpp gfx/image_00c_4ce6.2bpp gfx/image_00c_4d06.2bpp gfx/image_00c_4d30.2bpp gfx/image_00c_4d51.2bpp gfx/image_00c_4d6b.2bpp gfx/image_00c_4d94.2bpp gfx/image_00c_4dc7.2bpp gfx/image_00c_4e01.2bpp gfx/image_00c_4e68.2bpp gfx/image_00c_503c.2bpp gfx/image_00c_5109.2bpp gfx/image_00c_5137.2bpp gfx/image_00c_5160.2bpp gfx/image_00c_518d.2bpp gfx/image_00c_51ba.2bpp gfx/image_00c_5232.2bpp gfx/image_00c_527e.2bpp gfx/image_00c_52ce.2bpp gfx/image_00c_530a.2bpp gfx/image_00c_5320.2bpp gfx/image_00c_5353.2bpp gfx/image_00c_539b.2bpp gfx/image_00c_53d5.2bpp gfx/image_00c_53ef.2bpp gfx/image_00c_541e.2bpp gfx/image_00c_5496.2bpp gfx/image_00c_54f3.2bpp gfx/image_00c_5517.2bpp gfx/image_00c_555a.2bpp gfx/image_00c_5599.2bpp gfx/image_00c_55cd.2bpp gfx/image_00c_5f66.2bpp gfx/image_00c_5f91.2bpp gfx/image_00c_5ff7.2bpp gfx/image_00c_602a.2bpp gfx/image_00c_60b8.2bpp gfx/image_00c_612c.2bpp gfx/image_00c_62fb.2bpp gfx/image_00c_6370.2bpp gfx/image_00c_6422.2bpp gfx/image_00c_64e0.2bpp gfx/image_00c_6520.2bpp gfx/image_00c_6555.2bpp gfx/image_00c_6574.2bpp gfx/image_00c_65d2.2bpp gfx/image_00c_65ed.2bpp gfx/image_00c_66c7.2bpp gfx/image_00c_66e9.2bpp gfx/image_00c_6718.2bpp gfx/image_00c_6a7d.2bpp gfx/image_00c_6aac.2bpp gfx/image_00c_6ac6.2bpp gfx/image_00c_6b05.2bpp gfx/image_00d_5008.2bpp gfx/image_00d_501d.2bpp gfx/image_00d_5065.2bpp gfx/image_00d_5087.2bpp gfx/image_00d_5109.2bpp gfx/image_00d_511e.2bpp gfx/image_00d_5145.2bpp gfx/image_00d_5c4b.2bpp gfx/image_00d_5c87.2bpp gfx/image_00d_5d17.2bpp gfx/image_00d_5d53.2bpp gfx/image_00d_5daf.2bpp gfx/image_00d_5e15.2bpp gfx/image_00d_6068.2bpp gfx/image_00d_614d.2bpp gfx/image_00d_618c.2bpp gfx/image_00d_61c2.2bpp gfx/image_00d_61f7.2bpp gfx/image_00d_6268.2bpp gfx/image_00d_62c2.2bpp gfx/image_00d_635e.2bpp gfx/image_00d_63ea.2bpp gfx/image_00f_4001.2bpp gfx/image_00f_405f.2bpp gfx/image_00f_4080.2bpp gfx/image_00f_40f0.2bpp gfx/image_00f_41fd.2bpp gfx/image_00f_4231.2bpp gfx/image_00f_4275.2bpp gfx/image_00f_499b.2bpp gfx/image_00f_49b6.2bpp gfx/image_00f_49e9.2bpp gfx/image_00f_4a0a.2bpp gfx/image_00f_4a65.2bpp gfx/image_00f_4a88.2bpp gfx/image_00f_4aa6.2bpp gfx/image_00f_4ad9.2bpp gfx/image_00f_4b0d.2bpp gfx/image_00f_4b54.2bpp gfx/image_00f_4b87.2bpp gfx/image_00f_4d4e.2bpp gfx/image_00f_4dbb.2bpp gfx/image_00f_4ded.2bpp gfx/image_00f_4e60.2bpp gfx/image_00f_4e76.2bpp gfx/image_00f_55d1.2bpp gfx/image_00f_5603.2bpp gfx/image_00f_564d.2bpp gfx/image_00f_566e.2bpp gfx/image_00f_571e.2bpp gfx/image_00f_5738.2bpp gfx/image_00f_5754.2bpp gfx/image_00f_5783.2bpp gfx/image_00f_57a1.2bpp gfx/image_00f_585f.2bpp gfx/image_00f_6ed3.2bpp gfx/image_00f_6ee9.2bpp gfx/image_00f_6f22.2bpp gfx/image_00f_6f7a.2bpp gfx/image_00f_6fe2.2bpp gfx/image_00f_7012.2bpp gfx/image_010_6211.2bpp gfx/image_010_6511.2bpp gfx/image_010_7308.2bpp gfx/image_010_751b.2bpp gfx/image_011_404b.2bpp gfx/image_011_40a6.2bpp gfx/image_011_40c7.2bpp gfx/image_011_40fe.2bpp gfx/image_011_411b.2bpp gfx/image_011_41fd.2bpp gfx/image_011_4240.2bpp gfx/image_011_42df.2bpp gfx/image_011_4388.2bpp gfx/image_011_440e.2bpp gfx/image_011_443f.2bpp gfx/image_011_4475.2bpp gfx/image_015_643b.2bpp gfx/image_015_6450.2bpp gfx/image_015_646e.2bpp gfx/image_015_650e.2bpp gfx/image_015_65a8.2bpp gfx/image_015_65db.2bpp gfx/image_015_65ef.2bpp gfx/image_015_6676.2bpp gfx/image_015_66ab.2bpp gfx/image_016_4d19.2bpp gfx/image_016_4d41.2bpp gfx/image_016_4d6f.2bpp gfx/image_016_4e5a.2bpp gfx/image_016_4e88.2bpp gfx/image_016_4ec1.2bpp gfx/image_016_4ee5.2bpp gfx/image_016_4f0c.2bpp gfx/image_016_4f30.2bpp gfx/image_016_4f57.2bpp gfx/image_016_4f9b.2bpp gfx/image_016_4fef.2bpp gfx/image_016_5402.2bpp gfx/image_016_5498.2bpp gfx/image_016_54c7.2bpp gfx/image_016_5606.2bpp gfx/image_016_5948.2bpp gfx/image_016_59f9.2bpp gfx/image_016_5d87.2bpp gfx/image_016_5df5.2bpp gfx/image_016_5e3e.2bpp gfx/image_016_5e5d.2bpp gfx/image_016_5efc.2bpp gfx/image_016_5f6e.2bpp gfx/image_016_5fe6.2bpp gfx/image_016_6018.2bpp gfx/image_016_6040.2bpp gfx/image_016_634d.2bpp gfx/image_016_6366.2bpp gfx/image_016_64bd.2bpp gfx/image_016_64d2.2bpp gfx/image_016_6502.2bpp gfx/image_016_669a.2bpp gfx/image_016_66fa.2bpp gfx/image_017_4cb5.2bpp gfx/image_017_4cf1.2bpp gfx/image_017_4d31.2bpp gfx/image_017_4da7.2bpp gfx/image_017_4dd8.2bpp gfx/image_017_4e20.2bpp gfx/image_017_4e81.2bpp gfx/image_017_4f0f.2bpp gfx/image_017_4f25.2bpp gfx/image_017_4f39.2bpp gfx/image_017_53fd.2bpp gfx/image_017_547f.2bpp gfx/image_017_550a.2bpp gfx/image_017_55bd.2bpp gfx/image_017_59be.2bpp gfx/image_017_59f4.2bpp gfx/image_017_5a2d.2bpp gfx/image_017_5a58.2bpp gfx/image_017_5a74.2bpp gfx/image_017_5ad0.2bpp gfx/image_017_5aeb.2bpp gfx/image_017_5b17.2bpp gfx/image_017_5b56.2bpp gfx/image_017_5b7a.2bpp gfx/image_017_5bbb.2bpp gfx/image_017_5c4f.2bpp gfx/image_017_659a.2bpp gfx/image_017_65bd.2bpp gfx/image_017_65fd.2bpp gfx/image_017_6615.2bpp gfx/image_017_66b8.2bpp gfx/image_017_66ea.2bpp gfx/image_017_674a.2bpp gfx/image_017_7480.2bpp gfx/image_017_74a5.2bpp gfx/image_017_74c3.2bpp gfx/image_017_750b.2bpp gfx/image_017_75ad.2bpp gfx/image_017_75ca.2bpp gfx/image_017_75e4.2bpp gfx/image_017_76aa.2bpp gfx/image_017_77ce.2bpp gfx/image_017_7862.2bpp gfx/image_018_4a65.2bpp gfx/image_018_4ac5.2bpp gfx/image_018_4aea.2bpp gfx/image_018_4b1f.2bpp gfx/image_018_4b3e.2bpp gfx/image_018_4b91.2bpp gfx/image_018_4bd6.2bpp gfx/image_018_5a82.2bpp gfx/image_018_5c6e.2bpp gfx/image_018_5cfb.2bpp gfx/image_018_5e4d.2bpp gfx/image_018_5e71.2bpp gfx/image_018_5f2b.2bpp gfx/image_018_604f.2bpp gfx/image_018_6140.2bpp gfx/image_018_61d3.2bpp gfx/image_01b_40bf.2bpp gfx/image_01b_44d5.2bpp gfx/image_01b_4589.2bpp gfx/image_01b_5935.2bpp gfx/image_01b_5949.2bpp gfx/image_01b_5981.2bpp gfx/image_01b_59e7.2bpp gfx/image_01b_5a05.2bpp gfx/image_01b_5ad2.2bpp gfx/image_01b_5b8d.2bpp gfx/image_01b_5c2b.2bpp gfx/image_01b_5c85.2bpp gfx/image_01b_5d41.2bpp gfx/image_01b_5d88.2bpp gfx/image_01b_5e20.2bpp gfx/image_01b_61f6.2bpp gfx/image_01b_624d.2bpp gfx/image_01b_626d.2bpp gfx/image_01b_62ad.2bpp gfx/image_01b_636c.2bpp gfx/image_01b_64b0.2bpp gfx/image_01b_650b.2bpp gfx/image_01b_6560.2bpp gfx/image_01b_6586.2bpp gfx/image_01b_65c9.2bpp gfx/image_01b_65f7.2bpp gfx/image_01b_662f.2bpp gfx/image_01b_6680.2bpp gfx/image_01b_66af.2bpp gfx/image_01b_66d3.2bpp gfx/image_01b_679f.2bpp gfx/image_01b_67cd.2bpp gfx/image_01b_6b64.2bpp gfx/image_01b_6bae.2bpp gfx/image_01b_6bd2.2bpp gfx/image_01b_6c0a.2bpp gfx/image_01b_6c3e.2bpp gfx/image_01b_6c74.2bpp gfx/image_01b_6cef.2bpp gfx/image_01b_6d03.2bpp gfx/image_01b_6d58.2bpp gfx/image_01b_6f34.2bpp gfx/image_01b_6ff9.2bpp gfx/image_01b_706f.2bpp gfx/image_01b_7162.2bpp gfx/image_01b_71bd.2bpp

all: game.gb

%.2bpp: %.png
	rgbgfx --colors embedded -o $@ $<

%.1bpp: %.png
	rgbgfx -d 1 -o $@ $<

game.o: game.asm bank_*.asm $(IMAGE_DEPS)
	rgbasm -o game.o game.asm

game.gb: game.o
	rgblink -n game.sym -m game.map -o $@ $<
	rgbfix -v -p 255 $@

	@if which md5sum &>/dev/null; then md5sum $@; else md5 $@; fi

clean:
	rm -f game.o game.gb game.sym game.map
	find . \( -iname '*.1bpp' -o -iname '*.2bpp' \) -exec rm {} +